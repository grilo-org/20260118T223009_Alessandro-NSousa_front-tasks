<h2 mat-dialog-title class="text-center">Novo Usuário</h2>

<mat-dialog-content class="p-3">

    <form [formGroup]="signupForm">

        <div class="error" *ngIf="signupForm.controls.nome.touched && signupForm.controls.nome.invalid">
            <span *ngIf="signupForm.controls.nome.errors?.['required']">Nome é obrigatório.</span>
            <span *ngIf="signupForm.controls.nome.errors?.['minlength']">Use pelo menos 3 caracteres.</span>
        </div>
        <app-primary-input
            formControlName="nome"
            inputName="nome"
            type="text"
            label="Nome do Usuário"
            placeholder="João Mendes"
        >   
        </app-primary-input>
        
        <!-- email -->
         <div class="error" *ngIf="signupForm.controls.email.touched && signupForm.controls.email.invalid">
            <span *ngIf="signupForm.controls.email.errors?.['required']">Email é obrigatório.</span>
            <span *ngIf="signupForm.controls.email.errors?.['email']">Formato de email inválido.</span>
        </div>
        <app-primary-input
            formControlName="email"
            inputName="email"
            type="email"
            label="Email"
            placeholder="joao@gmail.com"
        >
        </app-primary-input>


        <!-- role -->
         <div class="error" *ngIf="signupForm.controls.role.touched && signupForm.controls.role.invalid">
        <span>Selecione um tipo de usuário.</span>
        </div>
         <app-primary-select
            formControlName="role"
            label="Tipo de Usuário"
            [options]="[
                { value: 'USER', label: 'Usuário' },
                { value: 'ADMIN', label: 'Administrador' }
            ]"
        ></app-primary-select>
        <!-- role -->

        <div class="error" *ngIf="signupForm.controls.password.touched && signupForm.controls.password.invalid">
            <span *ngIf="signupForm.controls.password.errors?.['required']">Senha é obrigatória.</span>
            <span *ngIf="signupForm.controls.password.errors?.['minlength']">Use pelo menos 6 caracteres.</span>
        </div>
        <app-primary-input
            formControlName="password"
            inputName="password"
            type="password"
            label="Senha"
        >
            <img src="/assets/svg/password-icon.svg">
        </app-primary-input>
        

        <div class="error" *ngIf="passwordMismatch">
            <span>As senhas não são iguais.</span>
        </div>
        <app-primary-input
            formControlName="passwordConfirm"
            inputName="passwordConfirm"
            type="password"
            label="Confirme a senha"
        >
            <img src="/assets/svg/password-icon.svg">
        </app-primary-input>
        
    </form>

</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancelar</button>

    <button 
        mat-flat-button 
        color="primary" 
        (click)="submit()"
        [disabled]="signupForm.invalid || passwordMismatch"
    >
        Salvar
    </button>
</mat-dialog-actions>
